{"version":3,"file":"footer-menu-toggle.js","sources":["../libraries/global/footer-menu-toggle.js"],"sourcesContent":["(function(Drupal, once) {\n\n  Drupal.behaviors.triggerClick = {\n    attach(context) {\n      once('button-click', '.toggle').forEach(\n        el => {\n          el.addEventListener(\"keypress\", function(e){\n            if(e.key===\"Enter\") {\n              e.preventDefault();\n              el.click(); \n            }\n          })  \n        }\n      )\n    }\n  }\n\n  Drupal.behaviors.footer_main_menu = {\n\n    attach(context) {\n      once('footer-nav', '.menu--main', context)\n        .forEach(el => {\n          // console.log('hello world')\n          let toggleMenus = el.querySelectorAll('.primary-nav__menu-item--level-1.primary-nav__menu-item--has-children');\n          toggleMenus.forEach( (menu, idx) => {\n            if(menu.querySelector('.is-active')){\n              menu.classList.add('active-trail')\n            }\n            let toggle = menu.querySelector('.primary-nav__button-toggle');\n            let child = menu.querySelector('.primary-nav__menu--level-2');\n            child.setAttribute('id', 'footer-menu_'+idx);\n            child.setAttribute('aria-expanded', 'false');\n            toggle.setAttribute('aria-expanded', 'false');\n            toggle.setAttribute('aria-controls', 'footer-menu_'+idx);\n            // todo abstract toggle function\n            toggle.addEventListener('click', function(e) {\n              e.preventDefault()\n              console.log(child)\n              if(!child.getAttribute('aria-expanded')=='true'){\n                el.querySelectorAll('.primary-nav__menu--level-2').forEach(childMenu => {\n                  if(childMenu.classList.contains('aria-expanded')){\n                    toggleOpen(childMenu); \n                    toggleOpen(toggle);\n                  }\n                });\n              }\n              toggleOpen(child);\n              toggleOpen(toggle);\n             }, false);\n          })\n        });\n    },\n  };\n\n  function toggleOpen(element) {\n    element.getAttribute('aria-expanded') === 'true'\n      ? element.setAttribute('aria-expanded', 'false')\n      : element.setAttribute('aria-expanded', 'true')\n  }\n})(Drupal, once);\n"],"names":["Drupal","once","context","el","e","menu","idx","toggle","child","childMenu","toggleOpen","element"],"mappings":"CAAC,SAASA,EAAQC,EAAM,CAEtBD,EAAO,UAAU,aAAe,CAC9B,OAAOE,EAAS,CACdD,EAAK,eAAgB,SAAS,EAAE,QAC9BE,GAAM,CACJA,EAAG,iBAAiB,WAAY,SAASC,EAAE,CACtCA,EAAE,MAAM,UACTA,EAAE,eAAc,EAChBD,EAAG,MAAK,EAEtB,CAAW,CACF,CACF,CACF,CACF,EAEDH,EAAO,UAAU,iBAAmB,CAElC,OAAOE,EAAS,CACdD,EAAK,aAAc,cAAeC,CAAO,EACtC,QAAQC,GAAM,CAEKA,EAAG,iBAAiB,uEAAuE,EACjG,QAAS,CAACE,EAAMC,IAAQ,CAC/BD,EAAK,cAAc,YAAY,GAChCA,EAAK,UAAU,IAAI,cAAc,EAEnC,IAAIE,EAASF,EAAK,cAAc,6BAA6B,EACzDG,EAAQH,EAAK,cAAc,6BAA6B,EAC5DG,EAAM,aAAa,KAAM,eAAeF,CAAG,EAC3CE,EAAM,aAAa,gBAAiB,OAAO,EAC3CD,EAAO,aAAa,gBAAiB,OAAO,EAC5CA,EAAO,aAAa,gBAAiB,eAAeD,CAAG,EAEvDC,EAAO,iBAAiB,QAAS,SAASH,EAAG,CAC3CA,EAAE,eAAgB,EAClB,QAAQ,IAAII,CAAK,EACd,CAACA,EAAM,aAAa,eAAe,GAAG,QACvCL,EAAG,iBAAiB,6BAA6B,EAAE,QAAQM,GAAa,CACnEA,EAAU,UAAU,SAAS,eAAe,IAC7CC,EAAWD,CAAS,EACpBC,EAAWH,CAAM,EAErC,CAAiB,EAEHG,EAAWF,CAAK,EAChBE,EAAWH,CAAM,CACjB,EAAE,EAAK,CACrB,CAAW,CACX,CAAS,CACJ,CACL,EAEE,SAASG,EAAWC,EAAS,CAC3BA,EAAQ,aAAa,eAAe,IAAM,OACtCA,EAAQ,aAAa,gBAAiB,OAAO,EAC7CA,EAAQ,aAAa,gBAAiB,MAAM,CACjD,CACH,GAAG,OAAQ,IAAI"}